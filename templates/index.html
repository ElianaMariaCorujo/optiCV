<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Opti-CV | Crea tu CV Profesional</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet">
    
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body>
    <div class="container">

        {% with messages = get_flashed_messages(with_categories=true) %}
            {% if messages %}
                {% for category, message in messages %}
                    <div class="alert alert-{{ category }}">
                        {{ message }}
                    </div>
                {% endfor %}
            {% endif %}
        {% endwith %}
        <h1>Crea tu CV Optimizado</h1>
        <p>Rellena los siguientes campos para generar tu CV profesional.</p>

        <form method="POST" action="/" novalidate>
            {{ form.hidden_tag() }}

            <fieldset>
                <legend>Información de Contacto</legend>
                
                {{ form.nombre_completo.label }}
                {{ form.nombre_completo() }}
                {% for error in form.nombre_completo.errors %}
                    <span class="error-message">{{ error }}</span>
                {% endfor %}

                {{ form.email.label }}
                {{ form.email() }}
                {% for error in form.email.errors %}
                    <span class="error-message">{{ error }}</span>
                {% endfor %}
                
                {{ form.telefono.label }}
                {{ form.telefono() }}
                {% for error in form.telefono.errors %}
                    <span class="error-message">{{ error }}</span>
                {% endfor %}

                {{ form.ubicacion.label }}
                {{ form.ubicacion() }}
                {% for error in form.ubicacion.errors %}
                    <span class="error-message">{{ error }}</span>
                {% endfor %}
            </fieldset>
            
            <fieldset>
                <legend>Enlaces Profesionales</legend>
                {{ form.linkedin.label(text="URL de tu Perfil de LinkedIn:") }}
                {{ form.linkedin() }}
                
                {{ form.github.label(text="URL de tu Perfil de GitHub (opcional):") }}
                {{ form.github() }}
            </fieldset>

            <fieldset>
                <legend>Resumen Profesional</legend>
                {{ form.resumen.label(text="Escribe un párrafo corto sobre ti:") }}
                {{ form.resumen() }}
                {% for error in form.resumen.errors %}
                    <span class="error-message">{{ error }}</span>
                {% endfor %}
            </fieldset>
            
            <fieldset>
                <legend>Experiencia Laboral</legend>
                
                <div id="experiencia-container">
                    <div class="experiencia-bloque">
                        <label for="experiencias-0-cargo">Cargo:</label><br>
                        <input type="text" id="experiencias-0-cargo" name="experiencias-0-cargo"><br><br>
                        
                        <label for="experiencias-0-empresa">Empresa:</label><br>
                        <input type="text" id="experiencias-0-empresa" name="experiencias-0-empresa"><br><br>
                        
                        <label for="experiencias-0-fecha_inicio_exp">Fecha de Inicio:</label><br>
                        <input type="text" id="experiencias-0-fecha_inicio_exp" name="experiencias-0-fecha_inicio_exp" placeholder="ej: Enero 2020"><br><br>
                        
                        <label for="experiencias-0-fecha_fin_exp">Fecha de Fin:</label><br>
                        <input type="text" id="experiencias-0-fecha_fin_exp" name="experiencias-0-fecha_fin_exp" placeholder="ej: Diciembre 2022 o Actualidad"><br><br>

                        <label for="experiencias-0-descripcion_exp">Descripción y Logros:</label><br>
                        <textarea id="experiencias-0-descripcion_exp" name="experiencias-0-descripcion_exp" rows="5" cols="60"></textarea><br><br>
                        <hr>
                    </div>
                </div>
                <button type="button" id="agregar-experiencia">+ Añadir otra experiencia</button>
            </fieldset>

            <fieldset>
                <legend>Formación Académica</legend>
                <div id="formacion-container">
                    <div class="formacion-bloque">
                        <label for="formaciones-0-titulo">Título / Carrera:</label><br>
                        <input type="text" id="formaciones-0-titulo" name="formaciones-0-titulo"><br><br>
                        
                        <label for="formaciones-0-institucion">Institución:</label><br>
                        <input type="text" id="formaciones-0-institucion" name="formaciones-0-institucion"><br><br>
                        
                        <label for="formaciones-0-fecha_fin_formacion">Año de Finalización:</label><br>
                        <input type="text" id="formaciones-0-fecha_fin_formacion" name="formaciones-0-fecha_fin_formacion" placeholder="ej: 2024 o En curso"><br><br>
                        <hr>
                    </div>
                </div>
                <button type="button" id="agregar-formacion">+ Añadir otra formación</button>
            </fieldset>
            
            <fieldset>
                <legend>Habilidades</legend>
                {{ form.habilidades.label(text="Enumera tus habilidades técnicas y blandas, separadas por comas:") }}
                {{ form.habilidades(placeholder="Ej: Python, Flask, JavaScript, SQL, Git, Liderazgo de equipos, Metodologías Ágiles") }}
                {% for error in form.habilidades.errors %}
                    <span class="error-message">{{ error }}</span>
                {% endfor %}
            </fieldset>

            <fieldset>
                <legend>Idiomas y Certificaciones</legend>
                {{ form.idiomas_certs.label(text="Enumera tus idiomas y certificaciones relevantes:") }}
                {{ form.idiomas_certs(placeholder="Ej: Inglés (Nivel C1 - Avanzado), Portugués (Nativo), Certified Scrum Master (CSM)") }}
                {% for error in form.idiomas_certs.errors %}
                    <span class="error-message">{{ error }}</span>
                {% endfor %}
            </fieldset>
            
            {{ form.submit() }}
        </form>
    </div>
    <script src="{{ url_for('static', filename='js/main.js') }}"></script>
</body>
</html>

